1. Routes
   В проекте может быть большое количество ручек и неудобно прописывать все их в одной файле.
   Для удобства принято выносить их в разные файлы.

- Создаем папку src/routes.
  Названия файлов в ней должны оканчиваться на .router.js (не обязательно, но так удобнее)

В файле отдельного роута подключаем express и создаем экземпляр роутера:

const express = require("express")
const router = express.Router()

- Переносим все обработчики ручек из основного файла в наш роутер (или пишем новые),
  только теперь мы их вызываем не на экземпляре экспресса, а на экземпляре роутера:
  (и не забываем импортировать сюда модель)

router.get("/", async (req, res) => {
const allPosts = await Post.find();
res.render("index", { posts: allPosts });
});

- Экспортируем router и импортируем в app.js. Подключаем
  app.use("/posts", postRoutes);

  !!!Важно!!!
  Мы прописываем путь ("/posts") в основном файле
  app.use("/posts", postRoutes);

И уже в самом роуте не прописываем. Например так в итоге сгенерируется в /post/add
router.post("/add", async (req, res) => {});

2. Partials

Мы можем вынести повторяющиеся части разметки в так называемые кусочки Partials
Для этого создаем папку partials внутри views и создаем в ней необходимые шаблоны
Чтобы вставить их куда-то, используем синтаксис {{>название}}

Если папка views находится не в корне проекта, то надо явно зарегистрировать путь
hbs.registerPartials(path.join(__dirname, "src", "views", "partials"));

3. Параметризированные запросы
   Уникальная часть пути, например у детальных страниц новостей. В обработчике ручки пишется через :
   Например:
   router.get("/:postId", async (req, res) => {
   const postId = req.params.postId;
   });

4. Middleware (промежуточные обработчики)
Есть готовые в express, например:
app.use(express.urlencoded({ extended: true }));

Но можно написать самостоятельно:
app.use((req, res, next)=>{
    //  какой-то код

    next() //  обязательно вызывать
});



